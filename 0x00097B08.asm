0x00097B08() {
  someVal = load(0x136E80)
  bufferId = load(0x136E0C)
  
  if(someVal != 0) {
    store(0x136E8C, 0)
    store(0x136E8E, 0)
    
    store(0x136E18, load(0x136DFC) + load(0x136E84 + bufferId * 2)) // texture window X
    store(0x136E1A, load(0x136DFE) + load(0x136E88 + bufferId * 2)) // texture window Y
    
    PutDrawEnv(0x136E10)
  }
  else {
    valOffset = bufferId == 0 ? 2 : 0
    
    offsetX = load(0x136DFC) + load(0x136E84 + valOffset)
    offsetY = load(0x136DFE) + load(0x136E88 + valOffset)
    
    setGTEScreenOffset(offsetX, offsetY)
    
    store(0x136E8C, offsetX)
    store(0x136E8E, offsetY)
  }
}

0x00097b08 lui r2,0x8013
0x00097b0c lh r2,0x6e80(r2)
0x00097b10 addiu r29,r29,0xffe0
0x00097b14 sw r31,0x0018(r29)
0x00097b18 sw r17,0x0014(r29)
0x00097b1c beq r2,r0,0x00097b90
0x00097b20 sw r16,0x0010(r29)
0x00097b24 lui r6,0x8013
0x00097b28 addiu r6,r6,0x6dfc
0x00097b2c lui r3,0x8013
0x00097b30 lh r3,0x6e0c(r3)
0x00097b34 lhu r2,0x0000(r6)
0x00097b38 sll r3,r3,0x01
0x00097b3c lui r4,0x8013
0x00097b40 addu r4,r4,r3
0x00097b44 lhu r4,0x6e84(r4)
0x00097b48 lui r5,0x8013
0x00097b4c addiu r5,r5,0x6e18
0x00097b50 lui r1,0x8013
0x00097b54 sh r0,0x6e8e(r1)
0x00097b58 lui r1,0x8013
0x00097b5c sh r0,0x6e8c(r1)
0x00097b60 addu r2,r2,r4
0x00097b64 sh r2,0x0000(r5)
0x00097b68 lhu r2,0x0002(r6)
0x00097b6c lui r1,0x8013
0x00097b70 addu r1,r1,r3
0x00097b74 lhu r3,0x6e88(r1)
0x00097b78 addiu r4,r5,0xfff8
0x00097b7c addu r2,r2,r3
0x00097b80 jal 0x00094b3c
0x00097b84 sh r2,0x0002(r5)
0x00097b88 j 0x00097bfc
0x00097b8c nop
0x00097b90 lui r2,0x8013
0x00097b94 addiu r2,r2,0x6e84
0x00097b98 lui r16,0x8013
0x00097b9c addiu r16,r16,0x6dfc
0x00097ba0 lui r5,0x8013
0x00097ba4 lh r5,0x6e0c(r5)
0x00097ba8 lh r4,0x0000(r16)
0x00097bac bne r5,r0,0x00097bb8
0x00097bb0 nop
0x00097bb4 addiu r2,r2,0x0002
0x00097bb8 lh r2,0x0000(r2)
0x00097bbc lui r3,0x8013
0x00097bc0 addiu r3,r3,0x6e88
0x00097bc4 addu r17,r4,r2
0x00097bc8 lh r2,0x0002(r16)
0x00097bcc bne r5,r0,0x00097bd8
0x00097bd0 nop
0x00097bd4 addiu r3,r3,0x0002
0x00097bd8 lh r16,0x0000(r3)
0x00097bdc addu r4,r17,r0
0x00097be0 addu r16,r2,r16
0x00097be4 jal 0x0009b340
0x00097be8 addu r5,r16,r0
0x00097bec lui r1,0x8013
0x00097bf0 sh r17,0x6e8c(r1)
0x00097bf4 lui r1,0x8013
0x00097bf8 sh r16,0x6e8e(r1)
0x00097bfc lw r31,0x0018(r29)
0x00097c00 lw r17,0x0014(r29)
0x00097c04 lw r16,0x0010(r29)
0x00097c08 jr r31
0x00097c0c addiu r29,r29,0x0020