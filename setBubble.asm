void setBubble(bubbleType, entityPtr) {
  for(instanceId = 0; instanceId < 3; instanceId++)
    if(load(0x155560 + instanceId * 0x18) < 0)
      break
  
  if(instanceId == 3)
    return -1
  
  instancePtr = 0x155560 + r3
  height = -load(0x12CECE + load(entityPtr) * 52) + 20
  
  store(instancePtr + 0x00, 0) // frame count
  store(instancePtr + 0x02, height)
  store(instancePtr + 0x04, height)
  store(instancePtr + 0x06, 0) // another frame count
  store(instancePtr + 0x08, load(0x12CE44 + bubbleType * 4)) // icon pointer
  store(instancePtr + 0x0C, 0) // scale?
  store(instancePtr + 0x10, 0) // scale?
  store(instancePtr + 0x14, entityPtr)
  
  setObject(0x0802, instanceId, 0xECC60, 0xEC644)
  return instanceId
}

0x000ec538 addiu r29,r29,0xffe8
0x000ec53c sw r31,0x0014(r29)
0x000ec540 sw r16,0x0010(r29)
0x000ec544 addu r16,r0,r0
0x000ec548 beq r0,r0,0x000ec574
0x000ec54c addu r3,r0,r0
0x000ec550 lui r2,0x8015
0x000ec554 addiu r2,r2,0x5560
0x000ec558 addu r2,r2,r3
0x000ec55c lh r2,0x0000(r2)
0x000ec560 nop
0x000ec564 bltz r2,0x000ec580
0x000ec568 nop
0x000ec56c addi r16,r16,0x0001
0x000ec570 addi r3,r3,0x0018
0x000ec574 slti r1,r16,0x0003
0x000ec578 bne r1,r0,0x000ec550
0x000ec57c nop
0x000ec580 addiu r1,r0,0x0003
0x000ec584 bne r16,r1,0x000ec594
0x000ec588 nop
0x000ec58c beq r0,r0,0x000ec634
0x000ec590 addiu r2,r0,0xffff
0x000ec594 sll r2,r16,0x01
0x000ec598 add r2,r2,r16
0x000ec59c sll r3,r2,0x03
0x000ec5a0 lui r2,0x8015
0x000ec5a4 addiu r2,r2,0x5560
0x000ec5a8 addu r6,r2,r3
0x000ec5ac sh r0,0x0000(r6)
0x000ec5b0 lw r3,0x0000(r5)
0x000ec5b4 lui r7,0x800f
0x000ec5b8 sll r2,r3,0x01
0x000ec5bc add r2,r2,r3
0x000ec5c0 sll r2,r2,0x02
0x000ec5c4 add r2,r2,r3
0x000ec5c8 sll r3,r2,0x02
0x000ec5cc lui r2,0x8013
0x000ec5d0 addiu r2,r2,0xcece
0x000ec5d4 addu r2,r2,r3
0x000ec5d8 lh r2,0x0000(r2)
0x000ec5dc sll r3,r4,0x02
0x000ec5e0 sub r2,r0,r2
0x000ec5e4 addi r2,r2,0x0014
0x000ec5e8 sh r2,0x0004(r6)
0x000ec5ec lh r2,0x0004(r6)
0x000ec5f0 addiu r4,r0,0x0802
0x000ec5f4 sh r2,0x0002(r6)
0x000ec5f8 sw r5,0x0014(r6)
0x000ec5fc sw r0,0x000c(r6)
0x000ec600 lui r2,0x8013
0x000ec604 sw r0,0x0010(r6)
0x000ec608 addiu r2,r2,0xce44
0x000ec60c sh r0,0x0006(r6)
0x000ec610 addu r2,r2,r3
0x000ec614 lw r2,0x0000(r2)
0x000ec618 addu r5,r16,r0
0x000ec61c sw r2,0x0008(r6)
0x000ec620 lui r6,0x800f
0x000ec624 addiu r6,r6,0xcc60
0x000ec628 jal 0x000a2f64
0x000ec62c addiu r7,r7,0xc644
0x000ec630 addu r2,r16,r0
0x000ec634 lw r31,0x0014(r29)
0x000ec638 lw r16,0x0010(r29)
0x000ec63c jr r31
0x000ec640 addiu r29,r29,0x0018