// something waypoint/autowalk related
void scriptInstrUnknown54(scriptId) {
  for(entityId = 0; entityId < 8; entityId++) {
    entityPtr = 0x155828 + entitiyId * 0x68
    
    entityTableEntry = load(0x12F344 + (entityId + 2) * 4)
    
    if(entityTableEntry != 0 && load(entityPtr + 0x65) == scriptId)
      break
  }
  
  locationPtr = load(entityPtr + 0x04)
  
  posX = load(locationPtr + 0x78)
  posY = load(locationPtr + 0x80)
  
  diffX = posX - load(0x13CB54 + entityId * 0xC4 + 0xA4)
  diffY = posY - load(0x13CB54 + entityId * 0xC4 + 0xA8)
  
  store(0x13CB54 + entityId * 0xC4 + 0xA4, posX) // current movement target X
  store(0x13CB54 + entityId * 0xC4 + 0xA8, posY) // current movement target Y
  
  for(i = 0; i < 8; i++) {
    offset = 0x13CB54 + entityId * 0xC4
    r2 = load(offset + 0x80 + i * 0x02)
    
    if(r2 == 0)
      continue
    
    if(r2 == -1)
      break
    
    store(offset + i * 0x10 + 0x00, load(offset + i * 0x10 + 0x00) + diffX)
    store(offset + i * 0x10 + 0x08, load(offset + i * 0x10 + 0x08) + diffY)
  }
}

0x000b797c lui r2,0x8015
0x000b7980 addiu r2,r2,0x5828
0x000b7984 addu r6,r0,r0
0x000b7988 beq r0,r0,0x000b79d4
0x000b798c addiu r7,r0,0x0002
0x000b7990 lui r3,0x8013
0x000b7994 sll r5,r7,0x02
0x000b7998 addiu r3,r3,0xf344
0x000b799c addu r3,r3,r5
0x000b79a0 lw r3,0x0000(r3)
0x000b79a4 nop
0x000b79a8 bne r3,r0,0x000b79b8
0x000b79ac nop
0x000b79b0 beq r0,r0,0x000b79cc
0x000b79b4 addiu r2,r2,0x0068
0x000b79b8 lbu r3,0x0065(r2)
0x000b79bc nop
0x000b79c0 beq r3,r4,0x000b79e0
0x000b79c4 nop
0x000b79c8 addiu r2,r2,0x0068
0x000b79cc addi r6,r6,0x0001
0x000b79d0 addi r7,r7,0x0001
0x000b79d4 slti r1,r6,0x0008
0x000b79d8 bne r1,r0,0x000b7990
0x000b79dc nop
0x000b79e0 sll r3,r6,0x03
0x000b79e4 sub r4,r3,r6
0x000b79e8 sll r3,r4,0x03
0x000b79ec sub r3,r3,r4
0x000b79f0 sll r4,r3,0x02
0x000b79f4 lui r3,0x8014
0x000b79f8 addiu r3,r3,0xcbf8
0x000b79fc lw r9,0x0004(r2)
0x000b7a00 addu r8,r3,r4
0x000b7a04 addu r5,r4,r0
0x000b7a08 lw r3,0x0078(r9)
0x000b7a0c lh r4,0x0000(r8)
0x000b7a10 addu r10,r3,r0
0x000b7a14 sub r3,r3,r4
0x000b7a18 lui r4,0x8014
0x000b7a1c addiu r4,r4,0xcbfc
0x000b7a20 addu r7,r4,r5
0x000b7a24 lw r4,0x0080(r9)
0x000b7a28 lh r6,0x0000(r7)
0x000b7a2c sll r3,r3,0x10
0x000b7a30 sh r10,0x0000(r8)
0x000b7a34 lw r2,0x0004(r2)
0x000b7a38 sub r4,r4,r6
0x000b7a3c lw r2,0x0080(r2)
0x000b7a40 sll r4,r4,0x10
0x000b7a44 sh r2,0x0000(r7)
0x000b7a48 lui r2,0x8014
0x000b7a4c addiu r2,r2,0xcb50
0x000b7a50 addu r2,r2,r5
0x000b7a54 sra r3,r3,0x10
0x000b7a58 sra r4,r4,0x10
0x000b7a5c addiu r6,r2,0x0004
0x000b7a60 addu r7,r0,r0
0x000b7a64 addu r8,r0,r0
0x000b7a68 beq r0,r0,0x000b7ac0
0x000b7a6c addu r9,r0,r0
0x000b7a70 addu r2,r8,r6
0x000b7a74 lh r2,0x0080(r2)
0x000b7a78 nop
0x000b7a7c beq r2,r0,0x000b7ab4
0x000b7a80 addu r5,r2,r0
0x000b7a84 addiu r1,r0,0xffff
0x000b7a88 beq r5,r1,0x000b7acc
0x000b7a8c nop
0x000b7a90 addu r5,r6,r9
0x000b7a94 lw r2,0x0000(r5)
0x000b7a98 nop
0x000b7a9c add r2,r2,r3
0x000b7aa0 sw r2,0x0000(r5)
0x000b7aa4 lw r2,0x0008(r5)
0x000b7aa8 nop
0x000b7aac add r2,r2,r4
0x000b7ab0 sw r2,0x0008(r5)
0x000b7ab4 addi r7,r7,0x0001
0x000b7ab8 addi r9,r9,0x0010
0x000b7abc addi r8,r8,0x0002
0x000b7ac0 slti r1,r7,0x0008
0x000b7ac4 bne r1,r0,0x000b7a70
0x000b7ac8 nop
0x000b7acc jr r31
0x000b7ad0 nop